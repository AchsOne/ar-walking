{"snapshots":{"/Users/florian/Documents/GitHub/ar-walking/app/src/main/java/com/example/arwalking/MainActivity.kt":{"filePath":"/Users/florian/Documents/GitHub/ar-walking/app/src/main/java/com/example/arwalking/MainActivity.kt","baseContent":"package com.example.arwalking\n\nimport androidx.activity.result.ActivityResultLauncher\nimport androidx.core.content.ContextCompat\nimport androidx.activity.result.contract.ActivityResultContracts\nimport android.provider.MediaStore\nimport android.Manifest\nimport android.content.Intent\nimport android.content.pm.PackageManager\nimport android.os.Bundle\nimport androidx.activity.ComponentActivity\nimport androidx.activity.compose.setContent\nimport androidx.activity.enableEdgeToEdge\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.material3.MaterialTheme\nimport com.example.arwalking.screens.CameraNavigation\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.CompositionLocalProvider\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.navigation.compose.NavHost\nimport androidx.navigation.compose.composable\nimport androidx.navigation.compose.rememberNavController\nimport com.example.arwalking.screens.HomeScreen\nimport com.example.arwalking.screens.LocalNavController\nimport com.example.arwalking.ui.theme.ARWalkingTheme\nimport java.net.URLDecoder\nimport java.nio.charset.StandardCharsets\nimport android.util.Log\nimport android.widget.Toast\nimport androidx.lifecycle.ViewModelProvider\n// OpenCV imports entfernt für Stub-Implementation\n\nclass MainActivity : ComponentActivity() {\n\n    private lateinit var routeViewModel: RouteViewModel\n\n\n    private val cameraPermissionLauncher: ActivityResultLauncher<String> =\n        registerForActivityResult(ActivityResultContracts.RequestPermission()) { granted ->\n            if (granted) {\n                openCamera()\n            }\n        }\n\n    private fun openCamera() {\n        val intent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n        if (intent.resolveActivity(packageManager) != null) {\n            startActivity(intent)\n        }\n    }\n\n    private fun checkCameraAndLaunch() {\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) ==\n            PackageManager.PERMISSION_GRANTED\n        ) {\n            openCamera()\n        } else {\n            cameraPermissionLauncher.launch(Manifest.permission.CAMERA)\n        }\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        // OpenCV initialisieren (Stub für lokale Entwicklung)\n        try {\n            // Simuliere OpenCV Initialisierung\n            Log.i(\"MainActivity\", \"OpenCV Stub loaded successfully\")\n        } catch (e: Exception) {\n            Log.e(\"MainActivity\", \"OpenCV Stub initialization failed: ${e.message}\")\n            Toast.makeText(this, \"OpenCV initialization failed!\", Toast.LENGTH_LONG).show()\n            return\n        }\n\n\n\n\n        // ViewModel erstellen\n        routeViewModel = ViewModelProvider(this)[RouteViewModel::class.java]\n\n        enableEdgeToEdge()\n        // Entferne checkCameraAndLaunch() - wird über Navigation gehandhabt\n        setContent {\n            ARWalkingTheme {\n                Surface(\n                    modifier = Modifier.fillMaxSize(),\n                    color = MaterialTheme.colorScheme.background\n                ) {\n                    ARWalkingApp()\n                }\n            }\n        }\n        val navigationRoute = routeViewModel.loadNavigationRoute(this)\n        if (navigationRoute != null) {\n            // Objekt ist bereit für weitere Verwendung\n            routeViewModel.logNavigationRoute(navigationRoute)\n            // weitere verwendung von navigationRoute....\n\n\n        } else {\n            Log.e(\"MainActivity\", \"Fehler beim Laden der Route\")\n        }\n    }\n}\n\n@Composable\nfun ARWalkingApp() {\n    val navController = rememberNavController()\n\n    CompositionLocalProvider(LocalNavController provides navController) {\n        NavHost(\n            navController = navController,\n            startDestination = \"home\"\n        ) {\n            composable(\"home\") {\n                HomeScreen(navController = navController)\n            }\n            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->\n                val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\"\n                val encodedStartLocation = backStackEntry.arguments?.getString(\"startLocation\") ?: \"Unbekannter Start\"\n                val destination = URLDecoder.decode(encodedDestination, StandardCharsets.UTF_8.toString())\n                val startLocation = URLDecoder.decode(encodedStartLocation, StandardCharsets.UTF_8.toString())\n                CameraNavigation(\n                    destination = destination,\n                    startLocation = startLocation\n                )\n            }\n            composable(\"open_cv_camera_activity\") {\n                OpenCvCameraActivity();\n            }\n\n            // Hier können später weitere Screens hinzugefügt werden:\n            // composable(\"ar_view\") { ARScreen(navController = navController) }\n            // composable(\"settings\") { SettingsScreen(navController = navController) }\n        }\n    }\n}\n\n@Preview(showBackground = true)\n@Composable\nprivate fun ARWalkingAppPreview() {\n    ARWalkingTheme {\n        ARWalkingApp()\n    }\n}","baseTimestamp":1754049441966,"deltas":[{"timestamp":1754230400348,"changes":[{"type":"MODIFY","lineNumber":86,"content":"        routeViewModel.initializeStorage(this)","oldContent":"        routeViewModel.initializeFeatureMapping(this)"}]},{"timestamp":1754230687560,"changes":[{"type":"MODIFY","lineNumber":107,"content":"            routeViewModel.enableStorageSystemImmediately(this)","oldContent":"            routeViewModel.enableFeatureMappingImmediately()"}]},{"timestamp":1754232021482,"changes":[{"type":"DELETE","lineNumber":84,"oldContent":"        // Sofort Feature Mapping und Upload-Komponenten initialisieren"},{"type":"DELETE","lineNumber":85,"oldContent":"        Log.i(\"MainActivity\", \"Initialisiere Feature Mapping und Upload-Komponenten beim App-Start...\")"},{"type":"INSERT","lineNumber":84,"content":"        // Sofort Feature Mapping initialisieren"},{"type":"INSERT","lineNumber":85,"content":"        Log.i(\"MainActivity\", \"Initialisiere Feature Mapping beim App-Start...\")"},{"type":"DELETE","lineNumber":87,"oldContent":"        routeViewModel.startUploadComponents(this)"}]},{"timestamp":1754250695407,"changes":[{"type":"MODIFY","lineNumber":26,"content":"","oldContent":"import com.example.arwalking.screens.LandmarkManagementScreen"}]},{"timestamp":1754250700368,"changes":[{"type":"MODIFY","lineNumber":104,"content":"            ","oldContent":"            // weitere verwendung von navigationRoute...."},{"type":"MODIFY","lineNumber":122,"content":"","oldContent":"    CompositionLocalProvider(LocalNavController provides navController) {"},{"type":"INSERT","lineNumber":131,"content":"        ) {"},{"type":"DELETE","lineNumber":133,"oldContent":"                HomeScreen(navController = navController)"},{"type":"INSERT","lineNumber":143,"content":"                )"},{"type":"DELETE","lineNumber":144,"oldContent":"            composable(\"open_cv_camera_activity\") {"},{"type":"DELETE","lineNumber":145,"oldContent":"            composable(\"training_mode\") {"},{"type":"DELETE","lineNumber":146,"oldContent":"                LandmarkManagementScreen(navController = navController)"},{"type":"DELETE","lineNumber":147,"oldContent":"            }"},{"type":"DELETE","lineNumber":148,"oldContent":"            composable(\"image_management\") {"},{"type":"DELETE","lineNumber":149,"oldContent":"                com.example.arwalking.screens.ImageManagementScreen(navController = navController)"},{"type":"DELETE","lineNumber":150,"oldContent":"            }"},{"type":"INSERT","lineNumber":147,"content":""},{"type":"INSERT","lineNumber":151,"content":"        }"},{"type":"DELETE","lineNumber":159,"oldContent":""},{"type":"INSERT","lineNumber":155,"content":"@Preview(showBackground = true)"}]},{"timestamp":1754313796183,"changes":[{"type":"DELETE","lineNumber":68,"oldContent":"        // OpenCV initialisieren (Stub für lokale Entwicklung)"},{"type":"DELETE","lineNumber":70,"oldContent":"            // Simuliere OpenCV Initialisierung"},{"type":"DELETE","lineNumber":71,"oldContent":"            Log.i(\"MainActivity\", \"OpenCV Stub loaded successfully\")"},{"type":"DELETE","lineNumber":72,"oldContent":"        } catch (e: Exception) {"},{"type":"DELETE","lineNumber":73,"oldContent":"            Log.e(\"MainActivity\", \"OpenCV Stub initialization failed: ${e.message}\")"},{"type":"DELETE","lineNumber":74,"oldContent":"            Toast.makeText(this, \"OpenCV initialization failed!\", Toast.LENGTH_LONG).show()"},{"type":"DELETE","lineNumber":75,"oldContent":"            return"},{"type":"DELETE","lineNumber":76,"oldContent":"        }"},{"type":"INSERT","lineNumber":69,"content":"            Log.i(\"MainActivity\", \"Starting MainActivity...\")"},{"type":"INSERT","lineNumber":71,"content":"            // ViewModel erstellen"},{"type":"INSERT","lineNumber":72,"content":"            routeViewModel = ViewModelProvider(this)[RouteViewModel::class.java]"},{"type":"INSERT","lineNumber":74,"content":"            enableEdgeToEdge()"},{"type":"INSERT","lineNumber":75,"content":"            "},{"type":"INSERT","lineNumber":76,"content":"            // UI zuerst setzen"},{"type":"INSERT","lineNumber":77,"content":"            setContent {"},{"type":"INSERT","lineNumber":78,"content":"                ARWalkingTheme {"},{"type":"INSERT","lineNumber":79,"content":"                    Surface("},{"type":"INSERT","lineNumber":80,"content":"                        modifier = Modifier.fillMaxSize(),"},{"type":"INSERT","lineNumber":81,"content":"                        color = MaterialTheme.colorScheme.background"},{"type":"INSERT","lineNumber":82,"content":"                    ) {"},{"type":"INSERT","lineNumber":83,"content":"                        ARWalkingApp()"},{"type":"INSERT","lineNumber":84,"content":"                    }"},{"type":"INSERT","lineNumber":85,"content":"                }"},{"type":"INSERT","lineNumber":86,"content":"            }"},{"type":"INSERT","lineNumber":88,"content":"            // Initialisierung asynchron durchführen"},{"type":"INSERT","lineNumber":89,"content":"            initializeAppAsync()"},{"type":"DELETE","lineNumber":81,"oldContent":"        // ViewModel erstellen"},{"type":"DELETE","lineNumber":82,"oldContent":"        routeViewModel = ViewModelProvider(this)[RouteViewModel::class.java]"},{"type":"INSERT","lineNumber":91,"content":"        } catch (e: Exception) {"},{"type":"INSERT","lineNumber":92,"content":"            Log.e(\"MainActivity\", \"Error in onCreate: ${e.message}\", e)"},{"type":"INSERT","lineNumber":93,"content":"            Toast.makeText(this, \"App initialization failed: ${e.message}\", Toast.LENGTH_LONG).show()"},{"type":"INSERT","lineNumber":94,"content":"        }"},{"type":"INSERT","lineNumber":95,"content":"    }"},{"type":"DELETE","lineNumber":84,"oldContent":"        // Sofort Feature Mapping initialisieren"},{"type":"DELETE","lineNumber":85,"oldContent":"        Log.i(\"MainActivity\", \"Initialisiere Feature Mapping beim App-Start...\")"},{"type":"DELETE","lineNumber":86,"oldContent":"        routeViewModel.initializeStorage(this)"},{"type":"INSERT","lineNumber":97,"content":"    private fun initializeAppAsync() {"},{"type":"INSERT","lineNumber":98,"content":"        try {"},{"type":"INSERT","lineNumber":99,"content":"            Log.i(\"MainActivity\", \"Starting async initialization...\")"},{"type":"INSERT","lineNumber":100,"content":"            "},{"type":"INSERT","lineNumber":101,"content":"            // Feature Mapping initialisieren (asynchron)"},{"type":"INSERT","lineNumber":102,"content":"            routeViewModel.initializeStorage(this)"},{"type":"DELETE","lineNumber":88,"oldContent":"        enableEdgeToEdge()"},{"type":"DELETE","lineNumber":89,"oldContent":"        // Entferne checkCameraAndLaunch() - wird über Navigation gehandhabt"},{"type":"DELETE","lineNumber":90,"oldContent":"        setContent {"},{"type":"DELETE","lineNumber":91,"oldContent":"            ARWalkingTheme {"},{"type":"DELETE","lineNumber":92,"oldContent":"                Surface("},{"type":"DELETE","lineNumber":93,"oldContent":"                    modifier = Modifier.fillMaxSize(),"},{"type":"DELETE","lineNumber":94,"oldContent":"                    color = MaterialTheme.colorScheme.background"},{"type":"DELETE","lineNumber":95,"oldContent":"                ) {"},{"type":"DELETE","lineNumber":96,"oldContent":"                    ARWalkingApp()"},{"type":"INSERT","lineNumber":104,"content":"            // Route laden (asynchron)"},{"type":"INSERT","lineNumber":105,"content":"            val navigationRoute = routeViewModel.loadNavigationRoute(this)"},{"type":"INSERT","lineNumber":106,"content":"            if (navigationRoute != null) {"},{"type":"INSERT","lineNumber":107,"content":"                routeViewModel.logNavigationRoute(navigationRoute)"},{"type":"INSERT","lineNumber":108,"content":"                routeViewModel.enableStorageSystemImmediately(this)"},{"type":"INSERT","lineNumber":109,"content":"                "},{"type":"INSERT","lineNumber":110,"content":"                // System-Validierung nur im Debug-Modus"},{"type":"INSERT","lineNumber":111,"content":"                if (BuildConfig.DEBUG) {"},{"type":"INSERT","lineNumber":112,"content":"                    try {"},{"type":"INSERT","lineNumber":113,"content":"                        val systemValidator = SystemValidator(this)"},{"type":"INSERT","lineNumber":114,"content":"                        systemValidator.validateSystem(routeViewModel)"},{"type":"INSERT","lineNumber":115,"content":"                        systemValidator.simulateFeatureMatching(routeViewModel, \"prof_ludwig_office\")"},{"type":"INSERT","lineNumber":116,"content":"                    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":117,"content":"                        Log.w(\"MainActivity\", \"Debug validation failed: ${e.message}\")"},{"type":"INSERT","lineNumber":118,"content":"                    }"},{"type":"INSERT","lineNumber":120,"content":"            } else {"},{"type":"INSERT","lineNumber":121,"content":"                Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"DELETE","lineNumber":99,"oldContent":"        }"},{"type":"DELETE","lineNumber":100,"oldContent":"        val navigationRoute = routeViewModel.loadNavigationRoute(this)"},{"type":"DELETE","lineNumber":101,"oldContent":"        if (navigationRoute != null) {"},{"type":"DELETE","lineNumber":102,"oldContent":"            // Objekt ist bereit für weitere Verwendung"},{"type":"DELETE","lineNumber":103,"oldContent":"            routeViewModel.logNavigationRoute(navigationRoute)"},{"type":"DELETE","lineNumber":105,"oldContent":"            // Feature Mapping ist bereits initialisiert, aktiviere es sofort"},{"type":"DELETE","lineNumber":106,"oldContent":"            routeViewModel.enableStorageSystemImmediately(this)"},{"type":"DELETE","lineNumber":107,"oldContent":"            "},{"type":"DELETE","lineNumber":108,"oldContent":"            // System-Validierung durchführen (nur im Debug-Modus)"},{"type":"DELETE","lineNumber":109,"oldContent":"            if (BuildConfig.DEBUG) {"},{"type":"DELETE","lineNumber":110,"oldContent":"                val systemValidator = SystemValidator(this)"},{"type":"DELETE","lineNumber":111,"oldContent":"                systemValidator.validateSystem(routeViewModel)"},{"type":"DELETE","lineNumber":112,"oldContent":"                "},{"type":"DELETE","lineNumber":113,"oldContent":"                // Simuliere Feature-Matching für Testzwecke"},{"type":"DELETE","lineNumber":114,"oldContent":"                systemValidator.simulateFeatureMatching(routeViewModel, \"prof_ludwig_office\")"},{"type":"DELETE","lineNumber":115,"oldContent":"            }"},{"type":"DELETE","lineNumber":116,"oldContent":"            "},{"type":"DELETE","lineNumber":117,"oldContent":"        } else {"},{"type":"DELETE","lineNumber":118,"oldContent":"            Log.e(\"MainActivity\", \"Fehler beim Laden der Route\")"},{"type":"INSERT","lineNumber":124,"content":"        } catch (e: Exception) {"},{"type":"INSERT","lineNumber":125,"content":"            Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"DELETE","lineNumber":127,"oldContent":"    CompositionLocalProvider(LocalNavController provides navController) {"},{"type":"DELETE","lineNumber":128,"oldContent":"        NavHost("},{"type":"DELETE","lineNumber":129,"oldContent":"            navController = navController,"},{"type":"DELETE","lineNumber":130,"oldContent":"            startDestination = \"home\""},{"type":"DELETE","lineNumber":131,"oldContent":"        ) {"},{"type":"DELETE","lineNumber":132,"oldContent":"            composable(\"home\") {"},{"type":"DELETE","lineNumber":133,"oldContent":"                HomeScreen(navController = navController)"},{"type":"INSERT","lineNumber":134,"content":"    try {"},{"type":"INSERT","lineNumber":135,"content":"        CompositionLocalProvider(LocalNavController provides navController) {"},{"type":"INSERT","lineNumber":136,"content":"            NavHost("},{"type":"INSERT","lineNumber":137,"content":"                navController = navController,"},{"type":"INSERT","lineNumber":138,"content":"                startDestination = \"home\""},{"type":"INSERT","lineNumber":139,"content":"            ) {"},{"type":"INSERT","lineNumber":140,"content":"                composable(\"home\") {"},{"type":"INSERT","lineNumber":141,"content":"                    try {"},{"type":"INSERT","lineNumber":142,"content":"                        HomeScreen(navController = navController)"},{"type":"INSERT","lineNumber":143,"content":"                    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":144,"content":"                        Log.e(\"ARWalkingApp\", \"Error in HomeScreen: ${e.message}\", e)"},{"type":"INSERT","lineNumber":145,"content":"                        // Fallback UI"},{"type":"INSERT","lineNumber":146,"content":"                        Box("},{"type":"INSERT","lineNumber":147,"content":"                            modifier = Modifier.fillMaxSize(),"},{"type":"INSERT","lineNumber":148,"content":"                            contentAlignment = androidx.compose.ui.Alignment.Center"},{"type":"INSERT","lineNumber":149,"content":"                        ) {"},{"type":"INSERT","lineNumber":150,"content":"                            Text("},{"type":"INSERT","lineNumber":151,"content":"                                text = \"ArWalking\\nLoading...\","},{"type":"INSERT","lineNumber":152,"content":"                                textAlign = androidx.compose.ui.text.style.TextAlign.Center,"},{"type":"INSERT","lineNumber":153,"content":"                                style = MaterialTheme.typography.headlineMedium"},{"type":"INSERT","lineNumber":154,"content":"                            )"},{"type":"INSERT","lineNumber":155,"content":"                        }"},{"type":"INSERT","lineNumber":156,"content":"                    }"},{"type":"INSERT","lineNumber":157,"content":"                }"},{"type":"INSERT","lineNumber":158,"content":"                composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"INSERT","lineNumber":159,"content":"                    try {"},{"type":"INSERT","lineNumber":160,"content":"                        val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"INSERT","lineNumber":161,"content":"                        val encodedStartLocation = backStackEntry.arguments?.getString(\"startLocation\") ?: \"Unbekannter Start\""},{"type":"INSERT","lineNumber":162,"content":"                        val destination = URLDecoder.decode(encodedDestination, StandardCharsets.UTF_8.toString())"},{"type":"INSERT","lineNumber":163,"content":"                        val startLocation = URLDecoder.decode(encodedStartLocation, StandardCharsets.UTF_8.toString())"},{"type":"INSERT","lineNumber":164,"content":"                        CameraNavigation("},{"type":"INSERT","lineNumber":165,"content":"                            destination = destination,"},{"type":"INSERT","lineNumber":166,"content":"                            startLocation = startLocation"},{"type":"INSERT","lineNumber":167,"content":"                        )"},{"type":"INSERT","lineNumber":168,"content":"                    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":169,"content":"                        Log.e(\"ARWalkingApp\", \"Error in CameraNavigation: ${e.message}\", e)"},{"type":"INSERT","lineNumber":170,"content":"                        // Fallback UI"},{"type":"INSERT","lineNumber":171,"content":"                        Box("},{"type":"INSERT","lineNumber":172,"content":"                            modifier = Modifier.fillMaxSize(),"},{"type":"INSERT","lineNumber":173,"content":"                            contentAlignment = androidx.compose.ui.Alignment.Center"},{"type":"INSERT","lineNumber":174,"content":"                        ) {"},{"type":"INSERT","lineNumber":175,"content":"                            Text("},{"type":"INSERT","lineNumber":176,"content":"                                text = \"Navigation Error\\n${e.message}\","},{"type":"INSERT","lineNumber":177,"content":"                                textAlign = androidx.compose.ui.text.style.TextAlign.Center,"},{"type":"INSERT","lineNumber":178,"content":"                                style = MaterialTheme.typography.bodyLarge"},{"type":"INSERT","lineNumber":179,"content":"                            )"},{"type":"INSERT","lineNumber":180,"content":"                        }"},{"type":"INSERT","lineNumber":181,"content":"                    }"},{"type":"INSERT","lineNumber":182,"content":"                }"},{"type":"DELETE","lineNumber":135,"oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":136,"oldContent":"                val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"DELETE","lineNumber":137,"oldContent":"                val encodedStartLocation = backStackEntry.arguments?.getString(\"startLocation\") ?: \"Unbekannter Start\""},{"type":"DELETE","lineNumber":138,"oldContent":"                val destination = URLDecoder.decode(encodedDestination, StandardCharsets.UTF_8.toString())"},{"type":"DELETE","lineNumber":139,"oldContent":"                val startLocation = URLDecoder.decode(encodedStartLocation, StandardCharsets.UTF_8.toString())"},{"type":"DELETE","lineNumber":140,"oldContent":"                CameraNavigation("},{"type":"DELETE","lineNumber":141,"oldContent":"                    destination = destination,"},{"type":"DELETE","lineNumber":142,"oldContent":"                    startLocation = startLocation"},{"type":"DELETE","lineNumber":143,"oldContent":"                )"},{"type":"DELETE","lineNumber":144,"oldContent":"            }"},{"type":"DELETE","lineNumber":145,"oldContent":""},{"type":"DELETE","lineNumber":147,"oldContent":""},{"type":"DELETE","lineNumber":148,"oldContent":""},{"type":"DELETE","lineNumber":149,"oldContent":"            // Hier können später weitere Screens hinzugefügt werden:"},{"type":"DELETE","lineNumber":150,"oldContent":"            // composable(\"ar_view\") { ARScreen(navController = navController) }"},{"type":"DELETE","lineNumber":151,"oldContent":"@Preview(showBackground = true)"},{"type":"DELETE","lineNumber":152,"oldContent":"            // composable(\"settings\") { SettingsScreen(navController = navController) }"},{"type":"DELETE","lineNumber":153,"oldContent":"            // composable(\"settings\") { SettingsScreen(navController = navController) }"},{"type":"INSERT","lineNumber":185,"content":"    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":186,"content":"        Log.e(\"ARWalkingApp\", \"Critical error in ARWalkingApp: ${e.message}\", e)"},{"type":"INSERT","lineNumber":187,"content":"        // Minimal fallback UI"},{"type":"INSERT","lineNumber":188,"content":"        Box("},{"type":"INSERT","lineNumber":189,"content":"            modifier = Modifier.fillMaxSize(),"},{"type":"INSERT","lineNumber":190,"content":"            contentAlignment = androidx.compose.ui.Alignment.Center"},{"type":"INSERT","lineNumber":191,"content":"        ) {"},{"type":"INSERT","lineNumber":192,"content":"            Text("},{"type":"INSERT","lineNumber":193,"content":"                text = \"ArWalking\\nStarting...\","},{"type":"INSERT","lineNumber":194,"content":"                textAlign = androidx.compose.ui.text.style.TextAlign.Center"},{"type":"INSERT","lineNumber":195,"content":"            )"},{"type":"INSERT","lineNumber":198,"content":"}"}]},{"timestamp":1754313804477,"changes":[{"type":"INSERT","lineNumber":14,"content":"import androidx.compose.foundation.layout.Box"},{"type":"INSERT","lineNumber":16,"content":"import androidx.compose.material3.Text"},{"type":"DELETE","lineNumber":68,"oldContent":"            Log.i(\"MainActivity\", \"Starting MainActivity...\")"},{"type":"INSERT","lineNumber":71,"content":"            Log.i(\"MainActivity\", \"Starting MainActivity...\")"},{"type":"INSERT","lineNumber":72,"content":""},{"type":"INSERT","lineNumber":75,"content":""},{"type":"DELETE","lineNumber":76,"oldContent":""},{"type":"DELETE","lineNumber":78,"oldContent":""},{"type":"DELETE","lineNumber":80,"oldContent":""},{"type":"DELETE","lineNumber":82,"oldContent":""},{"type":"DELETE","lineNumber":86,"oldContent":""},{"type":"INSERT","lineNumber":92,"content":""},{"type":"INSERT","lineNumber":98,"content":""},{"type":"DELETE","lineNumber":99,"oldContent":"                }"},{"type":"DELETE","lineNumber":101,"oldContent":"            }"},{"type":"INSERT","lineNumber":105,"content":""},{"type":"DELETE","lineNumber":107,"oldContent":"            "},{"type":"MODIFY","lineNumber":121,"content":"                }","oldContent":"        }"},{"type":"MODIFY","lineNumber":124,"content":"            }","oldContent":"    }"},{"type":"INSERT","lineNumber":125,"content":"            "},{"type":"INSERT","lineNumber":126,"content":"        } catch (e: Exception) {"},{"type":"INSERT","lineNumber":127,"content":"            Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"INSERT","lineNumber":128,"content":"        }"},{"type":"INSERT","lineNumber":129,"content":"    }"},{"type":"DELETE","lineNumber":129,"oldContent":"        } catch (e: Exception) {"},{"type":"DELETE","lineNumber":131,"oldContent":"            Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"DELETE","lineNumber":135,"oldContent":"            }"},{"type":"DELETE","lineNumber":148,"oldContent":"        }"},{"type":"DELETE","lineNumber":157,"oldContent":"}"},{"type":"DELETE","lineNumber":159,"oldContent":""},{"type":"DELETE","lineNumber":161,"oldContent":"}"},{"type":"DELETE","lineNumber":163,"oldContent":"            )"},{"type":"DELETE","lineNumber":165,"oldContent":"                textAlign = androidx.compose.ui.text.style.TextAlign.Center"},{"type":"DELETE","lineNumber":167,"oldContent":"                text = \"ArWalking\\nStarting...\","},{"type":"DELETE","lineNumber":169,"oldContent":"            Text("},{"type":"DELETE","lineNumber":171,"oldContent":"        ) {"},{"type":"DELETE","lineNumber":173,"oldContent":"            contentAlignment = androidx.compose.ui.Alignment.Center"},{"type":"DELETE","lineNumber":175,"oldContent":"            modifier = Modifier.fillMaxSize(),"},{"type":"DELETE","lineNumber":177,"oldContent":"        Box("},{"type":"DELETE","lineNumber":179,"oldContent":"        // Minimal fallback UI"},{"type":"DELETE","lineNumber":181,"oldContent":"        Log.e(\"ARWalkingApp\", \"Critical error in ARWalkingApp: ${e.message}\", e)"},{"type":"DELETE","lineNumber":183,"oldContent":"    } catch (e: Exception) {"},{"type":"DELETE","lineNumber":185,"oldContent":"                }"},{"type":"DELETE","lineNumber":187,"oldContent":"                    }"},{"type":"DELETE","lineNumber":189,"oldContent":"                        }"},{"type":"DELETE","lineNumber":191,"oldContent":"                            )"},{"type":"DELETE","lineNumber":193,"oldContent":"                                style = MaterialTheme.typography.bodyLarge"},{"type":"DELETE","lineNumber":195,"oldContent":"                                textAlign = androidx.compose.ui.text.style.TextAlign.Center,"},{"type":"DELETE","lineNumber":197,"oldContent":"                                text = \"Navigation Error\\n${e.message}\","},{"type":"INSERT","lineNumber":178,"content":"                                text = \"Navigation Error\\n${e.message}\","},{"type":"INSERT","lineNumber":179,"content":"                                textAlign = androidx.compose.ui.text.style.TextAlign.Center,"},{"type":"INSERT","lineNumber":180,"content":"                                style = MaterialTheme.typography.bodyLarge"},{"type":"INSERT","lineNumber":181,"content":"                            )"},{"type":"INSERT","lineNumber":182,"content":"                        }"},{"type":"INSERT","lineNumber":183,"content":"                    }"},{"type":"INSERT","lineNumber":184,"content":"                }"},{"type":"INSERT","lineNumber":185,"content":"            }"},{"type":"INSERT","lineNumber":186,"content":"        }"},{"type":"INSERT","lineNumber":187,"content":"    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":188,"content":"        Log.e(\"ARWalkingApp\", \"Critical error in ARWalkingApp: ${e.message}\", e)"},{"type":"INSERT","lineNumber":189,"content":"        // Minimal fallback UI"},{"type":"INSERT","lineNumber":190,"content":"        Box("},{"type":"INSERT","lineNumber":191,"content":"            modifier = Modifier.fillMaxSize(),"},{"type":"INSERT","lineNumber":192,"content":"            contentAlignment = androidx.compose.ui.Alignment.Center"},{"type":"INSERT","lineNumber":193,"content":"        ) {"},{"type":"INSERT","lineNumber":194,"content":"            Text("},{"type":"INSERT","lineNumber":195,"content":"                text = \"ArWalking\\nStarting...\","},{"type":"INSERT","lineNumber":196,"content":"                textAlign = androidx.compose.ui.text.style.TextAlign.Center"},{"type":"INSERT","lineNumber":197,"content":"            )"},{"type":"INSERT","lineNumber":198,"content":"        }"},{"type":"INSERT","lineNumber":199,"content":"    }"},{"type":"INSERT","lineNumber":200,"content":"}"},{"type":"INSERT","lineNumber":201,"content":""},{"type":"INSERT","lineNumber":202,"content":"@Preview(showBackground = true)"},{"type":"INSERT","lineNumber":203,"content":"@Composable"},{"type":"INSERT","lineNumber":204,"content":"private fun ARWalkingAppPreview() {"},{"type":"INSERT","lineNumber":205,"content":"    ARWalkingTheme {"},{"type":"INSERT","lineNumber":206,"content":"        ARWalkingApp()"},{"type":"INSERT","lineNumber":207,"content":"    }"},{"type":"INSERT","lineNumber":208,"content":"}"}]},{"timestamp":1754313833862,"changes":[{"type":"MODIFY","lineNumber":17,"content":"import com.example.arwalking.screens.CameraNavigation","oldContent":"import com.example.arwalking.screens.CameraNavigation"},{"type":"DELETE","lineNumber":71,"oldContent":"            // ViewModel erstellen"},{"type":"INSERT","lineNumber":72,"content":""},{"type":"INSERT","lineNumber":73,"content":"            // ViewModel erstellen"},{"type":"DELETE","lineNumber":78,"oldContent":""},{"type":"MODIFY","lineNumber":92,"content":"","oldContent":""},{"type":"MODIFY","lineNumber":105,"content":"","oldContent":""},{"type":"INSERT","lineNumber":120,"content":"                    }"},{"type":"DELETE","lineNumber":121,"oldContent":"        }"},{"type":"INSERT","lineNumber":123,"content":"                Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"DELETE","lineNumber":125,"oldContent":"                Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"DELETE","lineNumber":127,"oldContent":"}"},{"type":"DELETE","lineNumber":129,"oldContent":""},{"type":"DELETE","lineNumber":131,"oldContent":"@Composable"},{"type":"INSERT","lineNumber":130,"content":"}"},{"type":"INSERT","lineNumber":131,"content":""},{"type":"INSERT","lineNumber":132,"content":"@Composable"},{"type":"DELETE","lineNumber":136,"oldContent":"    try {"},{"type":"DELETE","lineNumber":137,"oldContent":"        CompositionLocalProvider(LocalNavController provides navController) {"},{"type":"DELETE","lineNumber":138,"oldContent":"            NavHost("},{"type":"DELETE","lineNumber":139,"oldContent":"                navController = navController,"},{"type":"DELETE","lineNumber":140,"oldContent":"                startDestination = \"home\""},{"type":"DELETE","lineNumber":141,"oldContent":"            ) {"},{"type":"DELETE","lineNumber":142,"oldContent":"                composable(\"home\") {"},{"type":"DELETE","lineNumber":143,"oldContent":"                    try {"},{"type":"DELETE","lineNumber":144,"oldContent":"                        HomeScreen(navController = navController)"},{"type":"DELETE","lineNumber":145,"oldContent":"                    } catch (e: Exception) {"},{"type":"DELETE","lineNumber":146,"oldContent":"                        Log.e(\"ARWalkingApp\", \"Error in HomeScreen: ${e.message}\", e)"},{"type":"DELETE","lineNumber":147,"oldContent":"                        // Fallback UI"},{"type":"DELETE","lineNumber":148,"oldContent":"                        Box("},{"type":"DELETE","lineNumber":149,"oldContent":"                            modifier = Modifier.fillMaxSize(),"},{"type":"DELETE","lineNumber":150,"oldContent":"                            contentAlignment = androidx.compose.ui.Alignment.Center"},{"type":"DELETE","lineNumber":151,"oldContent":"                        ) {"},{"type":"DELETE","lineNumber":152,"oldContent":"                            Text("},{"type":"DELETE","lineNumber":153,"oldContent":"                                text = \"ArWalking\\nLoading...\","},{"type":"DELETE","lineNumber":154,"oldContent":"                                textAlign = androidx.compose.ui.text.style.TextAlign.Center,"},{"type":"DELETE","lineNumber":155,"oldContent":"                                style = MaterialTheme.typography.headlineMedium"},{"type":"DELETE","lineNumber":156,"oldContent":"                            )"},{"type":"DELETE","lineNumber":157,"oldContent":"                        }"},{"type":"DELETE","lineNumber":158,"oldContent":"                    }"},{"type":"DELETE","lineNumber":159,"oldContent":"                }"},{"type":"DELETE","lineNumber":160,"oldContent":"                composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":161,"oldContent":"                    try {"},{"type":"DELETE","lineNumber":162,"oldContent":"                        val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"DELETE","lineNumber":163,"oldContent":"                        val encodedStartLocation = backStackEntry.arguments?.getString(\"startLocation\") ?: \"Unbekannter Start\""},{"type":"DELETE","lineNumber":164,"oldContent":"                        val destination = URLDecoder.decode(encodedDestination, StandardCharsets.UTF_8.toString())"},{"type":"DELETE","lineNumber":165,"oldContent":"                        val startLocation = URLDecoder.decode(encodedStartLocation, StandardCharsets.UTF_8.toString())"},{"type":"DELETE","lineNumber":166,"oldContent":"                        CameraNavigation("},{"type":"DELETE","lineNumber":167,"oldContent":"                                text = \"Navigation Error\\n${e.message}\","},{"type":"DELETE","lineNumber":168,"oldContent":"                            destination = destination,"},{"type":"DELETE","lineNumber":169,"oldContent":"                                textAlign = androidx.compose.ui.text.style.TextAlign.Center,"},{"type":"DELETE","lineNumber":170,"oldContent":"                                style = MaterialTheme.typography.bodyLarge"},{"type":"DELETE","lineNumber":171,"oldContent":"                            startLocation = startLocation"},{"type":"DELETE","lineNumber":172,"oldContent":"                            )"},{"type":"DELETE","lineNumber":173,"oldContent":"                        }"},{"type":"DELETE","lineNumber":174,"oldContent":"                        )"},{"type":"DELETE","lineNumber":175,"oldContent":"                    }"},{"type":"DELETE","lineNumber":176,"oldContent":"                }"},{"type":"DELETE","lineNumber":177,"oldContent":"                    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":136,"content":"    CompositionLocalProvider(LocalNavController provides navController) {"},{"type":"INSERT","lineNumber":137,"content":"        NavHost("},{"type":"INSERT","lineNumber":138,"content":"            navController = navController,"},{"type":"INSERT","lineNumber":139,"content":"            startDestination = \"home\""},{"type":"INSERT","lineNumber":140,"content":"        ) {"},{"type":"INSERT","lineNumber":141,"content":"            composable(\"home\") {"},{"type":"INSERT","lineNumber":142,"content":"                HomeScreen(navController = navController)"},{"type":"INSERT","lineNumber":144,"content":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"INSERT","lineNumber":145,"content":"                val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"INSERT","lineNumber":146,"content":"                val encodedStartLocation = backStackEntry.arguments?.getString(\"startLocation\") ?: \"Unbekannter Start\""},{"type":"INSERT","lineNumber":147,"content":"                val destination = URLDecoder.decode(encodedDestination, StandardCharsets.UTF_8.toString())"},{"type":"INSERT","lineNumber":148,"content":"                val startLocation = URLDecoder.decode(encodedStartLocation, StandardCharsets.UTF_8.toString())"},{"type":"INSERT","lineNumber":149,"content":"                CameraNavigation("},{"type":"INSERT","lineNumber":150,"content":"                    destination = destination,"},{"type":"INSERT","lineNumber":151,"content":"                    startLocation = startLocation"},{"type":"INSERT","lineNumber":152,"content":"                )"},{"type":"INSERT","lineNumber":153,"content":"            }"},{"type":"DELETE","lineNumber":180,"oldContent":"                        Log.e(\"ARWalkingApp\", \"Error in CameraNavigation: ${e.message}\", e)"},{"type":"DELETE","lineNumber":181,"oldContent":"    } catch (e: Exception) {"},{"type":"DELETE","lineNumber":182,"oldContent":"        Log.e(\"ARWalkingApp\", \"Critical error in ARWalkingApp: ${e.message}\", e)"},{"type":"DELETE","lineNumber":183,"oldContent":"                        // Fallback UI"},{"type":"DELETE","lineNumber":184,"oldContent":"        // Minimal fallback UI"},{"type":"DELETE","lineNumber":185,"oldContent":"        Box("},{"type":"DELETE","lineNumber":186,"oldContent":"                        Box("},{"type":"DELETE","lineNumber":187,"oldContent":"            modifier = Modifier.fillMaxSize(),"},{"type":"DELETE","lineNumber":188,"oldContent":"            contentAlignment = androidx.compose.ui.Alignment.Center"},{"type":"DELETE","lineNumber":189,"oldContent":"                            modifier = Modifier.fillMaxSize(),"},{"type":"DELETE","lineNumber":190,"oldContent":"        ) {"},{"type":"DELETE","lineNumber":191,"oldContent":"            Text("},{"type":"DELETE","lineNumber":192,"oldContent":"                            contentAlignment = androidx.compose.ui.Alignment.Center"},{"type":"DELETE","lineNumber":193,"oldContent":"                text = \"ArWalking\\nStarting...\","},{"type":"DELETE","lineNumber":194,"oldContent":"                textAlign = androidx.compose.ui.text.style.TextAlign.Center"},{"type":"DELETE","lineNumber":195,"oldContent":"                        ) {"},{"type":"DELETE","lineNumber":196,"oldContent":"            )"},{"type":"DELETE","lineNumber":197,"oldContent":"        }"},{"type":"DELETE","lineNumber":198,"oldContent":"                            Text("},{"type":"DELETE","lineNumber":201,"oldContent":"}"},{"type":"DELETE","lineNumber":202,"oldContent":"    }"},{"type":"DELETE","lineNumber":204,"oldContent":"        ARWalkingApp()"},{"type":"DELETE","lineNumber":206,"oldContent":"    ARWalkingTheme {"},{"type":"INSERT","lineNumber":161,"content":"    ARWalkingTheme {"},{"type":"INSERT","lineNumber":162,"content":"        ARWalkingApp()"},{"type":"INSERT","lineNumber":163,"content":"    }"},{"type":"INSERT","lineNumber":164,"content":"}"}]},{"timestamp":1754313847320,"changes":[{"type":"INSERT","lineNumber":16,"content":"import androidx.compose.material3.Text"},{"type":"DELETE","lineNumber":17,"oldContent":"import com.example.arwalking.screens.CameraNavigation"},{"type":"INSERT","lineNumber":27,"content":"import com.example.arwalking.screens.SimpleHomeScreen"},{"type":"DELETE","lineNumber":71,"oldContent":""},{"type":"INSERT","lineNumber":73,"content":""},{"type":"INSERT","lineNumber":92,"content":"            initializeAppAsync()"},{"type":"DELETE","lineNumber":92,"oldContent":""},{"type":"INSERT","lineNumber":105,"content":"            routeViewModel.initializeStorage(this)"},{"type":"DELETE","lineNumber":105,"oldContent":""},{"type":"DELETE","lineNumber":128,"oldContent":"}"},{"type":"INSERT","lineNumber":130,"content":"    }"},{"type":"INSERT","lineNumber":131,"content":"}"},{"type":"DELETE","lineNumber":132,"oldContent":"    }"},{"type":"INSERT","lineNumber":144,"content":"            }"},{"type":"INSERT","lineNumber":155,"content":"        }"},{"type":"INSERT","lineNumber":156,"content":"    }"},{"type":"INSERT","lineNumber":157,"content":"}"},{"type":"INSERT","lineNumber":158,"content":""},{"type":"INSERT","lineNumber":159,"content":"@Preview(showBackground = true)"},{"type":"INSERT","lineNumber":160,"content":"@Composable"},{"type":"INSERT","lineNumber":161,"content":"private fun ARWalkingAppPreview() {"},{"type":"DELETE","lineNumber":157,"oldContent":"            }"},{"type":"DELETE","lineNumber":158,"oldContent":"        }"},{"type":"DELETE","lineNumber":159,"oldContent":"    }"},{"type":"DELETE","lineNumber":160,"oldContent":"private fun ARWalkingAppPreview() {"},{"type":"DELETE","lineNumber":161,"oldContent":""}]},{"timestamp":1754313851782,"changes":[{"type":"MODIFY","lineNumber":93,"content":"","oldContent":""},{"type":"MODIFY","lineNumber":106,"content":"","oldContent":""},{"type":"MODIFY","lineNumber":132,"content":"","oldContent":""},{"type":"DELETE","lineNumber":143,"oldContent":"                HomeScreen(navController = navController)"},{"type":"DELETE","lineNumber":144,"oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"INSERT","lineNumber":143,"content":"                SimpleHomeScreen(navController = navController)"},{"type":"INSERT","lineNumber":145,"content":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":155,"oldContent":"    ARWalkingTheme {"},{"type":"DELETE","lineNumber":156,"oldContent":"        ARWalkingApp()"},{"type":"DELETE","lineNumber":159,"oldContent":"    }"},{"type":"DELETE","lineNumber":161,"oldContent":"}"},{"type":"DELETE","lineNumber":166,"oldContent":"@Preview(showBackground = true)"},{"type":"DELETE","lineNumber":167,"oldContent":"@Composable"},{"type":"DELETE","lineNumber":168,"oldContent":"private fun ARWalkingAppPreview() {"},{"type":"INSERT","lineNumber":162,"content":"    ARWalkingTheme {"},{"type":"INSERT","lineNumber":163,"content":"        ARWalkingApp()"},{"type":"INSERT","lineNumber":164,"content":"    }"},{"type":"INSERT","lineNumber":165,"content":"}"}]},{"timestamp":1754313907922,"changes":[{"type":"INSERT","lineNumber":92,"content":"            initializeAppAsync()"},{"type":"DELETE","lineNumber":93,"oldContent":""},{"type":"DELETE","lineNumber":101,"oldContent":"        try {"},{"type":"DELETE","lineNumber":102,"oldContent":"            Log.i(\"MainActivity\", \"Starting async initialization...\")"},{"type":"DELETE","lineNumber":103,"oldContent":"            "},{"type":"DELETE","lineNumber":104,"oldContent":"            // Feature Mapping initialisieren (asynchron)"},{"type":"DELETE","lineNumber":105,"oldContent":""},{"type":"DELETE","lineNumber":106,"oldContent":""},{"type":"DELETE","lineNumber":107,"oldContent":"            // Route laden (asynchron)"},{"type":"DELETE","lineNumber":108,"oldContent":"            val navigationRoute = routeViewModel.loadNavigationRoute(this)"},{"type":"DELETE","lineNumber":109,"oldContent":"            if (navigationRoute != null) {"},{"type":"DELETE","lineNumber":110,"oldContent":"                routeViewModel.logNavigationRoute(navigationRoute)"},{"type":"DELETE","lineNumber":111,"oldContent":"                routeViewModel.enableStorageSystemImmediately(this)"},{"type":"INSERT","lineNumber":101,"content":"        // Führe Initialisierung in einem separaten Thread aus"},{"type":"INSERT","lineNumber":102,"content":"        Thread {"},{"type":"INSERT","lineNumber":103,"content":"            try {"},{"type":"INSERT","lineNumber":104,"content":"                Log.i(\"MainActivity\", \"Starting async initialization...\")"},{"type":"DELETE","lineNumber":113,"oldContent":"                // System-Validierung nur im Debug-Modus"},{"type":"DELETE","lineNumber":114,"oldContent":"                if (BuildConfig.DEBUG) {"},{"type":"DELETE","lineNumber":115,"oldContent":"                    try {"},{"type":"DELETE","lineNumber":116,"oldContent":"                        val systemValidator = SystemValidator(this)"},{"type":"DELETE","lineNumber":117,"oldContent":"                        systemValidator.validateSystem(routeViewModel)"},{"type":"DELETE","lineNumber":118,"oldContent":"                        systemValidator.simulateFeatureMatching(routeViewModel, \"prof_ludwig_office\")"},{"type":"DELETE","lineNumber":119,"oldContent":"                    } catch (e: Exception) {"},{"type":"DELETE","lineNumber":120,"oldContent":"                        Log.w(\"MainActivity\", \"Debug validation failed: ${e.message}\")"},{"type":"INSERT","lineNumber":106,"content":"                // Feature Mapping initialisieren (asynchron)"},{"type":"INSERT","lineNumber":107,"content":"                routeViewModel.initializeStorage(this)"},{"type":"INSERT","lineNumber":108,"content":""},{"type":"INSERT","lineNumber":109,"content":"                // Route laden (asynchron)"},{"type":"INSERT","lineNumber":110,"content":"                val navigationRoute = routeViewModel.loadNavigationRoute(this)"},{"type":"INSERT","lineNumber":111,"content":"                if (navigationRoute != null) {"},{"type":"INSERT","lineNumber":112,"content":"                    routeViewModel.logNavigationRoute(navigationRoute)"},{"type":"INSERT","lineNumber":113,"content":"                    routeViewModel.enableStorageSystemImmediately(this)"},{"type":"INSERT","lineNumber":114,"content":"                    "},{"type":"INSERT","lineNumber":115,"content":"                    // System-Validierung nur im Debug-Modus"},{"type":"INSERT","lineNumber":116,"content":"                    if (BuildConfig.DEBUG) {"},{"type":"INSERT","lineNumber":117,"content":"                        try {"},{"type":"INSERT","lineNumber":118,"content":"                            val systemValidator = SystemValidator(this)"},{"type":"INSERT","lineNumber":119,"content":"                            systemValidator.validateSystem(routeViewModel)"},{"type":"INSERT","lineNumber":120,"content":"                            systemValidator.simulateFeatureMatching(routeViewModel, \"prof_ludwig_office\")"},{"type":"INSERT","lineNumber":121,"content":"                        } catch (e: Exception) {"},{"type":"INSERT","lineNumber":122,"content":"                            Log.w(\"MainActivity\", \"Debug validation failed: ${e.message}\")"},{"type":"INSERT","lineNumber":123,"content":"                        }"},{"type":"INSERT","lineNumber":125,"content":"                } else {"},{"type":"INSERT","lineNumber":126,"content":"                    Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"DELETE","lineNumber":123,"oldContent":"            } else {"},{"type":"DELETE","lineNumber":124,"oldContent":"                Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"INSERT","lineNumber":128,"content":"                "},{"type":"INSERT","lineNumber":129,"content":"                Log.i(\"MainActivity\", \"Async initialization completed successfully\")"},{"type":"INSERT","lineNumber":130,"content":"                "},{"type":"INSERT","lineNumber":131,"content":"            } catch (e: Exception) {"},{"type":"INSERT","lineNumber":132,"content":"                Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"DELETE","lineNumber":126,"oldContent":"            "},{"type":"DELETE","lineNumber":127,"oldContent":"        } catch (e: Exception) {"},{"type":"DELETE","lineNumber":128,"oldContent":"            Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"DELETE","lineNumber":129,"oldContent":"        }"},{"type":"INSERT","lineNumber":134,"content":"        }.start()"},{"type":"INSERT","lineNumber":136,"content":"}"},{"type":"DELETE","lineNumber":132,"oldContent":""},{"type":"DELETE","lineNumber":144,"oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"INSERT","lineNumber":150,"content":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":158,"oldContent":"    ARWalkingTheme {"},{"type":"DELETE","lineNumber":160,"oldContent":"        ARWalkingApp()"},{"type":"DELETE","lineNumber":162,"oldContent":"    }"},{"type":"DELETE","lineNumber":164,"oldContent":"}"},{"type":"DELETE","lineNumber":166,"oldContent":"private fun ARWalkingAppPreview() {"},{"type":"DELETE","lineNumber":167,"oldContent":"                                style = MaterialTheme.typography.bodyLarge"},{"type":"DELETE","lineNumber":169,"oldContent":"                        }"},{"type":"DELETE","lineNumber":171,"oldContent":"                            )"}]},{"timestamp":1754313942558,"changes":[{"type":"INSERT","lineNumber":30,"content":"import com.example.arwalking.ui.theme.ARWalkingTheme"},{"type":"DELETE","lineNumber":35,"oldContent":"// OpenCV imports entfernt für Stub-Implementation"},{"type":"INSERT","lineNumber":37,"content":"// OpenCV imports entfernt für Stub-Implementation"},{"type":"DELETE","lineNumber":70,"oldContent":"        // OpenCV initialisieren (Stub für lokale Entwicklung)"},{"type":"MODIFY","lineNumber":71,"content":"        try {","oldContent":"            // Simuliere OpenCV Initialisierung"},{"type":"MODIFY","lineNumber":101,"content":"        // Führe nur minimale Initialisierung durch, um Crashes zu vermeiden","oldContent":"        // Führe Initialisierung in einem separaten Thread aus"},{"type":"DELETE","lineNumber":104,"oldContent":"                Log.i(\"MainActivity\", \"Starting async initialization...\")"},{"type":"DELETE","lineNumber":105,"oldContent":"                // Feature Mapping initialisieren (asynchron)"},{"type":"INSERT","lineNumber":104,"content":"                Log.i(\"MainActivity\", \"Starting minimal async initialization...\")"},{"type":"INSERT","lineNumber":105,"content":"                "},{"type":"INSERT","lineNumber":106,"content":"                // Nur grundlegende Initialisierung"},{"type":"DELETE","lineNumber":107,"oldContent":""},{"type":"MODIFY","lineNumber":108,"content":"                ","oldContent":"                // Route laden (asynchron)"},{"type":"INSERT","lineNumber":109,"content":"                // Route laden ohne komplexe Validierung"},{"type":"DELETE","lineNumber":111,"oldContent":"                    routeViewModel.logNavigationRoute(navigationRoute)"},{"type":"DELETE","lineNumber":112,"oldContent":"                "},{"type":"DELETE","lineNumber":113,"oldContent":"                    routeViewModel.enableStorageSystemImmediately(this)"},{"type":"DELETE","lineNumber":114,"oldContent":"                    "},{"type":"DELETE","lineNumber":115,"oldContent":"                    // System-Validierung nur im Debug-Modus"},{"type":"DELETE","lineNumber":116,"oldContent":"                    if (BuildConfig.DEBUG) {"},{"type":"DELETE","lineNumber":117,"oldContent":"                        try {"},{"type":"DELETE","lineNumber":118,"oldContent":"                            val systemValidator = SystemValidator(this)"},{"type":"DELETE","lineNumber":119,"oldContent":"                            systemValidator.validateSystem(routeViewModel)"},{"type":"DELETE","lineNumber":120,"oldContent":"                            systemValidator.simulateFeatureMatching(routeViewModel, \"prof_ludwig_office\")"},{"type":"DELETE","lineNumber":121,"oldContent":"                        } catch (e: Exception) {"},{"type":"DELETE","lineNumber":122,"oldContent":"                    }"},{"type":"DELETE","lineNumber":123,"oldContent":"                            Log.w(\"MainActivity\", \"Debug validation failed: ${e.message}\")"},{"type":"DELETE","lineNumber":124,"oldContent":"                }"},{"type":"DELETE","lineNumber":125,"oldContent":"                        }"},{"type":"INSERT","lineNumber":112,"content":"                    Log.i(\"MainActivity\", \"Navigation route loaded successfully\")"},{"type":"DELETE","lineNumber":127,"oldContent":"            }"},{"type":"INSERT","lineNumber":115,"content":"                }"},{"type":"DELETE","lineNumber":130,"oldContent":"                Log.i(\"MainActivity\", \"Async initialization completed successfully\")"},{"type":"INSERT","lineNumber":117,"content":"                Log.i(\"MainActivity\", \"Minimal initialization completed\")"},{"type":"DELETE","lineNumber":132,"oldContent":"    }"},{"type":"DELETE","lineNumber":134,"oldContent":""},{"type":"DELETE","lineNumber":136,"oldContent":"@Composable"},{"type":"INSERT","lineNumber":121,"content":"                // App sollte trotzdem funktionieren, auch wenn Initialisierung fehlschlägt"},{"type":"INSERT","lineNumber":122,"content":"            }"},{"type":"INSERT","lineNumber":124,"content":"    }"},{"type":"INSERT","lineNumber":125,"content":"}"},{"type":"INSERT","lineNumber":126,"content":""},{"type":"INSERT","lineNumber":127,"content":"@Composable"},{"type":"DELETE","lineNumber":140,"oldContent":"}"},{"type":"INSERT","lineNumber":139,"content":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":154,"oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"INSERT","lineNumber":159,"content":"}"}]},{"timestamp":1754314349840,"changes":[{"type":"DELETE","lineNumber":27,"oldContent":"import com.example.arwalking.screens.SimpleHomeScreen"},{"type":"INSERT","lineNumber":112,"content":"                } else {"},{"type":"INSERT","lineNumber":113,"content":"                    Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"INSERT","lineNumber":115,"content":"                "},{"type":"INSERT","lineNumber":117,"content":"                "},{"type":"INSERT","lineNumber":118,"content":"            } catch (e: Exception) {"},{"type":"INSERT","lineNumber":119,"content":"                Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"INSERT","lineNumber":122,"content":"        }.start()"},{"type":"DELETE","lineNumber":120,"oldContent":"                } else {"},{"type":"DELETE","lineNumber":122,"oldContent":"                    Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"DELETE","lineNumber":123,"oldContent":"                "},{"type":"DELETE","lineNumber":124,"oldContent":"                "},{"type":"DELETE","lineNumber":125,"oldContent":"            } catch (e: Exception) {"},{"type":"DELETE","lineNumber":126,"oldContent":"                Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"DELETE","lineNumber":127,"oldContent":"        }.start()"},{"type":"DELETE","lineNumber":129,"oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"INSERT","lineNumber":138,"content":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":148,"oldContent":"}"},{"type":"INSERT","lineNumber":156,"content":"        ARWalkingApp()"},{"type":"INSERT","lineNumber":157,"content":"    }"},{"type":"INSERT","lineNumber":158,"content":"}"}]},{"timestamp":1754314354775,"changes":[{"type":"MODIFY","lineNumber":35,"content":"import com.example.arwalking.BuildConfig","oldContent":""},{"type":"INSERT","lineNumber":37,"content":""},{"type":"DELETE","lineNumber":69,"oldContent":"        // OpenCV initialisieren (Stub für lokale Entwicklung)"},{"type":"MODIFY","lineNumber":112,"content":"                } else {","oldContent":"                } else {"},{"type":"INSERT","lineNumber":115,"content":"                "},{"type":"INSERT","lineNumber":118,"content":"            } catch (e: Exception) {"},{"type":"INSERT","lineNumber":119,"content":"                Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"DELETE","lineNumber":119,"oldContent":"                "},{"type":"INSERT","lineNumber":122,"content":"        }.start()"},{"type":"DELETE","lineNumber":121,"oldContent":"            } catch (e: Exception) {"},{"type":"DELETE","lineNumber":123,"oldContent":"                Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"DELETE","lineNumber":126,"oldContent":"        }.start()"},{"type":"DELETE","lineNumber":136,"oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"MODIFY","lineNumber":136,"content":"                HomeScreen(navController = navController)","oldContent":"                SimpleHomeScreen(navController = navController)"},{"type":"INSERT","lineNumber":138,"content":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"MODIFY","lineNumber":155,"content":"    ARWalkingTheme {","oldContent":"        ARWalkingApp()"},{"type":"INSERT","lineNumber":156,"content":"        ARWalkingApp()"}]},{"timestamp":1754315896736,"changes":[{"type":"DELETE","lineNumber":73,"oldContent":"            // ViewModel erstellen"},{"type":"DELETE","lineNumber":74,"oldContent":"            routeViewModel = ViewModelProvider(this)[RouteViewModel::class.java]"},{"type":"DELETE","lineNumber":75,"oldContent":""},{"type":"DELETE","lineNumber":78,"oldContent":"            // UI zuerst setzen"},{"type":"INSERT","lineNumber":75,"content":"            // UI zuerst setzen - ohne ViewModel Initialisierung"},{"type":"DELETE","lineNumber":90,"oldContent":"            // Initialisierung asynchron durchführen"},{"type":"INSERT","lineNumber":87,"content":"            // ViewModel und andere Initialisierung später und sicher"},{"type":"INSERT","lineNumber":93,"content":"            // App trotzdem weiter laufen lassen"},{"type":"INSERT","lineNumber":109,"content":"                    Log.i(\"MainActivity\", \"Navigation route loaded successfully\")"},{"type":"DELETE","lineNumber":112,"oldContent":"                } else {"},{"type":"DELETE","lineNumber":118,"oldContent":"                // App sollte trotzdem funktionieren, auch wenn Initialisierung fehlschlägt"},{"type":"DELETE","lineNumber":120,"oldContent":"            }"},{"type":"DELETE","lineNumber":122,"oldContent":"    }"},{"type":"INSERT","lineNumber":118,"content":"                // App sollte trotzdem funktionieren, auch wenn Initialisierung fehlschlägt"},{"type":"INSERT","lineNumber":119,"content":"            }"},{"type":"INSERT","lineNumber":121,"content":"    }"},{"type":"DELETE","lineNumber":127,"oldContent":"                )"},{"type":"INSERT","lineNumber":125,"content":"fun ARWalkingApp() {"},{"type":"MODIFY","lineNumber":136,"content":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->","oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":154,"oldContent":"        ARWalkingApp()"},{"type":"INSERT","lineNumber":152,"content":"private fun ARWalkingAppPreview() {"}]},{"timestamp":1754315910963,"changes":[{"type":"DELETE","lineNumber":73,"oldContent":"            // UI zuerst setzen - ohne ViewModel Initialisierung"},{"type":"INSERT","lineNumber":75,"content":"            // UI zuerst setzen - ohne ViewModel Initialisierung"},{"type":"DELETE","lineNumber":84,"oldContent":"            // ViewModel und andere Initialisierung später und sicher"},{"type":"INSERT","lineNumber":87,"content":"            // ViewModel und andere Initialisierung später und sicher"},{"type":"DELETE","lineNumber":90,"oldContent":"            // App trotzdem weiter laufen lassen"},{"type":"INSERT","lineNumber":93,"content":"            // App trotzdem weiter laufen lassen"},{"type":"DELETE","lineNumber":103,"oldContent":"                // Nur grundlegende Initialisierung"},{"type":"MODIFY","lineNumber":103,"content":"                // ViewModel sicher erstellen","oldContent":"                routeViewModel.initializeStorage(this)"},{"type":"INSERT","lineNumber":104,"content":"                runOnUiThread {"},{"type":"INSERT","lineNumber":105,"content":"                    try {"},{"type":"INSERT","lineNumber":106,"content":"                        routeViewModel = ViewModelProvider(this@MainActivity)[RouteViewModel::class.java]"},{"type":"INSERT","lineNumber":107,"content":"                        Log.i(\"MainActivity\", \"RouteViewModel created successfully\")"},{"type":"INSERT","lineNumber":108,"content":"                    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":109,"content":"                        Log.e(\"MainActivity\", \"Error creating RouteViewModel: ${e.message}\", e)"},{"type":"INSERT","lineNumber":110,"content":"                    }"},{"type":"INSERT","lineNumber":111,"content":"                }"},{"type":"DELETE","lineNumber":106,"oldContent":"                // Route laden ohne komplexe Validierung"},{"type":"DELETE","lineNumber":107,"oldContent":"                    Log.i(\"MainActivity\", \"Navigation route loaded successfully\")"},{"type":"DELETE","lineNumber":108,"oldContent":"                val navigationRoute = routeViewModel.loadNavigationRoute(this)"},{"type":"DELETE","lineNumber":109,"oldContent":"                if (navigationRoute != null) {"},{"type":"DELETE","lineNumber":110,"oldContent":"                } else {"},{"type":"DELETE","lineNumber":111,"oldContent":"                    Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"INSERT","lineNumber":113,"content":"                // Kurz warten, dann weitere Initialisierung"},{"type":"INSERT","lineNumber":114,"content":"                Thread.sleep(500)"},{"type":"INSERT","lineNumber":115,"content":"                "},{"type":"INSERT","lineNumber":116,"content":"                // Nur wenn ViewModel erfolgreich erstellt wurde"},{"type":"INSERT","lineNumber":117,"content":"                if (::routeViewModel.isInitialized) {"},{"type":"INSERT","lineNumber":118,"content":"                    try {"},{"type":"INSERT","lineNumber":119,"content":"                        routeViewModel.initializeStorage(this@MainActivity)"},{"type":"INSERT","lineNumber":120,"content":"                        Log.i(\"MainActivity\", \"Storage initialized\")"},{"type":"INSERT","lineNumber":121,"content":"                    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":122,"content":"                        Log.e(\"MainActivity\", \"Storage initialization failed: ${e.message}\", e)"},{"type":"INSERT","lineNumber":123,"content":"                    }"},{"type":"INSERT","lineNumber":124,"content":"                    "},{"type":"INSERT","lineNumber":125,"content":"                    try {"},{"type":"INSERT","lineNumber":126,"content":"                        val navigationRoute = routeViewModel.loadNavigationRoute(this@MainActivity)"},{"type":"INSERT","lineNumber":127,"content":"                        if (navigationRoute != null) {"},{"type":"INSERT","lineNumber":128,"content":"                            Log.i(\"MainActivity\", \"Navigation route loaded successfully\")"},{"type":"INSERT","lineNumber":129,"content":"                        } else {"},{"type":"INSERT","lineNumber":130,"content":"                            Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"INSERT","lineNumber":131,"content":"                        }"},{"type":"INSERT","lineNumber":132,"content":"                    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":133,"content":"                        Log.e(\"MainActivity\", \"Route loading failed: ${e.message}\", e)"},{"type":"INSERT","lineNumber":134,"content":"                    }"},{"type":"DELETE","lineNumber":116,"oldContent":"                // App sollte trotzdem funktionieren, auch wenn Initialisierung fehlschlägt"},{"type":"DELETE","lineNumber":117,"oldContent":"            }"},{"type":"DELETE","lineNumber":119,"oldContent":"    }"},{"type":"INSERT","lineNumber":141,"content":"                // App sollte trotzdem funktionieren, auch wenn Initialisierung fehlschlägt"},{"type":"INSERT","lineNumber":142,"content":"            }"},{"type":"INSERT","lineNumber":144,"content":"    }"},{"type":"DELETE","lineNumber":123,"oldContent":"fun ARWalkingApp() {"},{"type":"INSERT","lineNumber":148,"content":"fun ARWalkingApp() {"},{"type":"DELETE","lineNumber":134,"oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":135,"oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"INSERT","lineNumber":157,"content":"                HomeScreen(navController = navController)"},{"type":"INSERT","lineNumber":159,"content":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":150,"oldContent":"private fun ARWalkingAppPreview() {"},{"type":"INSERT","lineNumber":175,"content":"private fun ARWalkingAppPreview() {"}]},{"timestamp":1754321611460,"changes":[{"type":"MODIFY","lineNumber":75,"content":"            // UI zuerst setzen - ohne ViewModel Initialisierung","oldContent":"            // UI zuerst setzen - ohne ViewModel Initialisierung"},{"type":"MODIFY","lineNumber":87,"content":"            // ViewModel und andere Initialisierung später und sicher","oldContent":"            // ViewModel und andere Initialisierung später und sicher"},{"type":"MODIFY","lineNumber":93,"content":"            // App trotzdem weiter laufen lassen","oldContent":"            // App trotzdem weiter laufen lassen"},{"type":"MODIFY","lineNumber":104,"content":"                runOnUiThread {","oldContent":"                routeViewModel.initializeStorage(this)"},{"type":"DELETE","lineNumber":106,"oldContent":"                "},{"type":"INSERT","lineNumber":108,"content":"                        "},{"type":"INSERT","lineNumber":109,"content":"                        // Initialisierung direkt nach ViewModel-Erstellung"},{"type":"INSERT","lineNumber":110,"content":"                        try {"},{"type":"INSERT","lineNumber":111,"content":"                            routeViewModel.initializeStorage(this@MainActivity)"},{"type":"INSERT","lineNumber":112,"content":"                            Log.i(\"MainActivity\", \"Storage initialized\")"},{"type":"INSERT","lineNumber":113,"content":"                        } catch (e: Exception) {"},{"type":"INSERT","lineNumber":114,"content":"                            Log.e(\"MainActivity\", \"Storage initialization failed: ${e.message}\", e)"},{"type":"INSERT","lineNumber":115,"content":"                        }"},{"type":"INSERT","lineNumber":116,"content":"                        "},{"type":"INSERT","lineNumber":117,"content":"                        try {"},{"type":"INSERT","lineNumber":118,"content":"                            val navigationRoute = routeViewModel.loadNavigationRoute(this@MainActivity)"},{"type":"INSERT","lineNumber":119,"content":"                            if (navigationRoute != null) {"},{"type":"INSERT","lineNumber":120,"content":"                                Log.i(\"MainActivity\", \"Navigation route loaded successfully\")"},{"type":"INSERT","lineNumber":121,"content":"                            } else {"},{"type":"INSERT","lineNumber":122,"content":"                                Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"INSERT","lineNumber":123,"content":"                            }"},{"type":"INSERT","lineNumber":124,"content":"                        } catch (e: Exception) {"},{"type":"INSERT","lineNumber":125,"content":"                            Log.e(\"MainActivity\", \"Route loading failed: ${e.message}\", e)"},{"type":"INSERT","lineNumber":126,"content":"                        }"},{"type":"INSERT","lineNumber":127,"content":"                        "},{"type":"DELETE","lineNumber":113,"oldContent":"                }"},{"type":"DELETE","lineNumber":114,"oldContent":"                // Kurz warten, dann weitere Initialisierung"},{"type":"DELETE","lineNumber":116,"oldContent":"                Thread.sleep(500)"},{"type":"DELETE","lineNumber":119,"oldContent":"                "},{"type":"DELETE","lineNumber":120,"oldContent":"                // Nur wenn ViewModel erfolgreich erstellt wurde"},{"type":"DELETE","lineNumber":121,"oldContent":"                if (::routeViewModel.isInitialized) {"},{"type":"DELETE","lineNumber":122,"oldContent":"                    try {"},{"type":"DELETE","lineNumber":124,"oldContent":"                        routeViewModel.initializeStorage(this@MainActivity)"},{"type":"DELETE","lineNumber":125,"oldContent":"                        Log.i(\"MainActivity\", \"Storage initialized\")"},{"type":"DELETE","lineNumber":127,"oldContent":"                    } catch (e: Exception) {"},{"type":"INSERT","lineNumber":137,"content":"                // App sollte trotzdem funktionieren, auch wenn Initialisierung fehlschlägt"},{"type":"INSERT","lineNumber":138,"content":"            }"},{"type":"DELETE","lineNumber":129,"oldContent":"                        Log.e(\"MainActivity\", \"Storage initialization failed: ${e.message}\", e)"},{"type":"INSERT","lineNumber":140,"content":"    }"},{"type":"DELETE","lineNumber":131,"oldContent":"                    }"},{"type":"DELETE","lineNumber":132,"oldContent":"                    "},{"type":"DELETE","lineNumber":134,"oldContent":"                    try {"},{"type":"DELETE","lineNumber":136,"oldContent":"                        val navigationRoute = routeViewModel.loadNavigationRoute(this@MainActivity)"},{"type":"DELETE","lineNumber":137,"oldContent":"                    startLocation = startLocation"},{"type":"DELETE","lineNumber":138,"oldContent":"                        if (navigationRoute != null) {"},{"type":"INSERT","lineNumber":144,"content":"fun ARWalkingApp() {"},{"type":"INSERT","lineNumber":145,"content":"    val navController = rememberNavController()"},{"type":"DELETE","lineNumber":140,"oldContent":"                            Log.i(\"MainActivity\", \"Navigation route loaded successfully\")"},{"type":"DELETE","lineNumber":142,"oldContent":"                        } else {"},{"type":"DELETE","lineNumber":144,"oldContent":"                            Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"DELETE","lineNumber":146,"oldContent":"                        }"},{"type":"DELETE","lineNumber":148,"oldContent":"                    } catch (e: Exception) {"},{"type":"DELETE","lineNumber":150,"oldContent":"                        Log.e(\"MainActivity\", \"Route loading failed: ${e.message}\", e)"},{"type":"DELETE","lineNumber":152,"oldContent":"                    }"},{"type":"INSERT","lineNumber":153,"content":"                HomeScreen(navController = navController)"},{"type":"INSERT","lineNumber":155,"content":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"},{"type":"DELETE","lineNumber":158,"oldContent":"                // App sollte trotzdem funktionieren, auch wenn Initialisierung fehlschlägt"},{"type":"DELETE","lineNumber":160,"oldContent":"            }"},{"type":"DELETE","lineNumber":163,"oldContent":"    }"},{"type":"DELETE","lineNumber":168,"oldContent":"fun ARWalkingApp() {"},{"type":"INSERT","lineNumber":171,"content":"private fun ARWalkingAppPreview() {"},{"type":"DELETE","lineNumber":177,"oldContent":"                HomeScreen(navController = navController)"},{"type":"DELETE","lineNumber":178,"oldContent":"private fun ARWalkingAppPreview() {"},{"type":"DELETE","lineNumber":179,"oldContent":"            composable(\"camera_navigation/{destination}/{startLocation}\") { backStackEntry ->"}]},{"timestamp":1754325118914,"changes":[{"type":"INSERT","lineNumber":13,"content":"import androidx.activity.viewModels"},{"type":"DELETE","lineNumber":14,"oldContent":"import androidx.compose.foundation.layout.Box"},{"type":"DELETE","lineNumber":16,"oldContent":"import androidx.compose.material3.Text"},{"type":"MODIFY","lineNumber":33,"content":"import androidx.lifecycle.lifecycleScope","oldContent":"import androidx.lifecycle.ViewModelProvider"},{"type":"MODIFY","lineNumber":39,"content":"    private val routeViewModel: RouteViewModel by viewModels()","oldContent":"    private lateinit var routeViewModel: RouteViewModel"},{"type":"INSERT","lineNumber":73,"content":"            "},{"type":"DELETE","lineNumber":75,"oldContent":"            // UI zuerst setzen - ohne ViewModel Initialisierung"},{"type":"INSERT","lineNumber":85,"content":""},{"type":"DELETE","lineNumber":87,"oldContent":"            // ViewModel und andere Initialisierung später und sicher"},{"type":"DELETE","lineNumber":88,"oldContent":"            initializeAppAsync()"},{"type":"INSERT","lineNumber":87,"content":"            lifecycleScope.launch {"},{"type":"INSERT","lineNumber":88,"content":"                try {"},{"type":"INSERT","lineNumber":89,"content":"                    routeViewModel.initializeStorage(this@MainActivity)"},{"type":"INSERT","lineNumber":90,"content":"                    routeViewModel.loadNavigationRoute(this@MainActivity)"},{"type":"INSERT","lineNumber":91,"content":"                    Log.i(\"MainActivity\", \"Initialization completed\")"},{"type":"INSERT","lineNumber":92,"content":"                } catch (e: Exception) {"},{"type":"INSERT","lineNumber":93,"content":"                    Log.e(\"MainActivity\", \"Initialization failed: ${'$'}{e.message}\", e)"},{"type":"INSERT","lineNumber":94,"content":"                    Toast.makeText("},{"type":"INSERT","lineNumber":95,"content":"                        this@MainActivity,"},{"type":"INSERT","lineNumber":96,"content":"                        \"App initialization failed: ${'$'}{e.message}\","},{"type":"INSERT","lineNumber":97,"content":"                        Toast.LENGTH_LONG"},{"type":"INSERT","lineNumber":98,"content":"                    ).show()"},{"type":"INSERT","lineNumber":99,"content":"                }"},{"type":"INSERT","lineNumber":100,"content":"            }"},{"type":"INSERT","lineNumber":104,"content":"            Toast.makeText(this, \"App initialization failed: ${e.message}\", Toast.LENGTH_LONG).show()"},{"type":"DELETE","lineNumber":93,"oldContent":"            // App trotzdem weiter laufen lassen"},{"type":"DELETE","lineNumber":97,"oldContent":"    private fun initializeAppAsync() {"},{"type":"DELETE","lineNumber":98,"oldContent":"        // Führe nur minimale Initialisierung durch, um Crashes zu vermeiden"},{"type":"DELETE","lineNumber":99,"oldContent":"        Thread {"},{"type":"DELETE","lineNumber":100,"oldContent":"            try {"},{"type":"DELETE","lineNumber":101,"oldContent":"                Log.i(\"MainActivity\", \"Starting minimal async initialization...\")"},{"type":"DELETE","lineNumber":102,"oldContent":"                "},{"type":"DELETE","lineNumber":103,"oldContent":"                // ViewModel sicher erstellen"},{"type":"DELETE","lineNumber":104,"oldContent":"                runOnUiThread {"},{"type":"DELETE","lineNumber":105,"oldContent":"                    try {"},{"type":"DELETE","lineNumber":106,"oldContent":"                        routeViewModel = ViewModelProvider(this@MainActivity)[RouteViewModel::class.java]"},{"type":"DELETE","lineNumber":107,"oldContent":"                        "},{"type":"DELETE","lineNumber":108,"oldContent":"                        Log.i(\"MainActivity\", \"RouteViewModel created successfully\")"},{"type":"DELETE","lineNumber":109,"oldContent":"                        // Initialisierung direkt nach ViewModel-Erstellung"},{"type":"DELETE","lineNumber":110,"oldContent":"                    } catch (e: Exception) {"},{"type":"DELETE","lineNumber":111,"oldContent":"                        try {"},{"type":"DELETE","lineNumber":112,"oldContent":"                        Log.e(\"MainActivity\", \"Error creating RouteViewModel: ${e.message}\", e)"},{"type":"DELETE","lineNumber":113,"oldContent":"                            routeViewModel.initializeStorage(this@MainActivity)"},{"type":"DELETE","lineNumber":114,"oldContent":"                    }"},{"type":"DELETE","lineNumber":115,"oldContent":"                            Log.i(\"MainActivity\", \"Storage initialized\")"},{"type":"DELETE","lineNumber":116,"oldContent":"                }"},{"type":"DELETE","lineNumber":117,"oldContent":"                        } catch (e: Exception) {"},{"type":"DELETE","lineNumber":118,"oldContent":"                            Log.e(\"MainActivity\", \"Storage initialization failed: ${e.message}\", e)"},{"type":"DELETE","lineNumber":119,"oldContent":"                        }"},{"type":"DELETE","lineNumber":120,"oldContent":"                "},{"type":"DELETE","lineNumber":121,"oldContent":"                        "},{"type":"DELETE","lineNumber":122,"oldContent":"                        try {"},{"type":"DELETE","lineNumber":123,"oldContent":"                Log.i(\"MainActivity\", \"Minimal initialization completed\")"},{"type":"DELETE","lineNumber":124,"oldContent":"                            val navigationRoute = routeViewModel.loadNavigationRoute(this@MainActivity)"},{"type":"DELETE","lineNumber":125,"oldContent":"                "},{"type":"DELETE","lineNumber":126,"oldContent":"                            if (navigationRoute != null) {"},{"type":"DELETE","lineNumber":127,"oldContent":"                                Log.i(\"MainActivity\", \"Navigation route loaded successfully\")"},{"type":"DELETE","lineNumber":128,"oldContent":"                            } else {"},{"type":"DELETE","lineNumber":129,"oldContent":"                                Log.w(\"MainActivity\", \"Navigation route could not be loaded\")"},{"type":"DELETE","lineNumber":130,"oldContent":"                            }"},{"type":"DELETE","lineNumber":131,"oldContent":"            } catch (e: Exception) {"},{"type":"DELETE","lineNumber":132,"oldContent":"                        } catch (e: Exception) {"},{"type":"DELETE","lineNumber":133,"oldContent":"                            Log.e(\"MainActivity\", \"Route loading failed: ${e.message}\", e)"},{"type":"DELETE","lineNumber":134,"oldContent":"                        }"},{"type":"DELETE","lineNumber":135,"oldContent":"                Log.e(\"MainActivity\", \"Error in async initialization: ${e.message}\", e)"},{"type":"DELETE","lineNumber":136,"oldContent":"                        "},{"type":"DELETE","lineNumber":137,"oldContent":"        }.start()"},{"type":"DELETE","lineNumber":141,"oldContent":"                // App sollte trotzdem funktionieren, auch wenn Initialisierung fehlschlägt"},{"type":"DELETE","lineNumber":142,"oldContent":"            }"},{"type":"INSERT","lineNumber":112,"content":"fun ARWalkingApp() {"},{"type":"INSERT","lineNumber":113,"content":"    val navController = rememberNavController()"},{"type":"DELETE","lineNumber":144,"oldContent":"    }"},{"type":"DELETE","lineNumber":147,"oldContent":"fun ARWalkingApp() {"},{"type":"DELETE","lineNumber":148,"oldContent":"    val navController = rememberNavController()"},{"type":"DELETE","lineNumber":155,"oldContent":"                val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"INSERT","lineNumber":124,"content":"                val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"DELETE","lineNumber":169,"oldContent":"private fun ARWalkingAppPreview() {"},{"type":"INSERT","lineNumber":139,"content":"private fun ARWalkingAppPreview() {"},{"type":"DELETE","lineNumber":175,"oldContent":"private fun ARWalkingAppPreview() {"},{"type":"INSERT","lineNumber":143,"content":"}"},{"type":"INSERT","lineNumber":144,"content":""}]},{"timestamp":1754325169405,"changes":[{"type":"INSERT","lineNumber":32,"content":"import android.widget.Toast"},{"type":"DELETE","lineNumber":33,"oldContent":"import androidx.lifecycle.ViewModelProvider"},{"type":"INSERT","lineNumber":35,"content":"import kotlinx.coroutines.launch"},{"type":"INSERT","lineNumber":36,"content":""},{"type":"INSERT","lineNumber":40,"content":""},{"type":"DELETE","lineNumber":39,"oldContent":"    private lateinit var routeViewModel: RouteViewModel"},{"type":"DELETE","lineNumber":72,"oldContent":"            "},{"type":"INSERT","lineNumber":75,"content":"            "},{"type":"DELETE","lineNumber":84,"oldContent":""},{"type":"INSERT","lineNumber":87,"content":""},{"type":"DELETE","lineNumber":90,"oldContent":""},{"type":"DELETE","lineNumber":92,"oldContent":"        } catch (e: Exception) {"},{"type":"DELETE","lineNumber":94,"oldContent":"            Log.e(\"MainActivity\", \"Error in onCreate: ${e.message}\", e)"},{"type":"DELETE","lineNumber":96,"oldContent":"            // App trotzdem weiter laufen lassen"},{"type":"DELETE","lineNumber":99,"oldContent":"        }"},{"type":"DELETE","lineNumber":101,"oldContent":"    }"},{"type":"MODIFY","lineNumber":103,"content":"","oldContent":""},{"type":"INSERT","lineNumber":104,"content":"        } catch (e: Exception) {"},{"type":"INSERT","lineNumber":105,"content":"            Log.e(\"MainActivity\", \"Error in onCreate: ${e.message}\", e)"},{"type":"DELETE","lineNumber":109,"oldContent":"fun ARWalkingApp() {"},{"type":"DELETE","lineNumber":110,"oldContent":"    val navController = rememberNavController()"},{"type":"DELETE","lineNumber":111,"oldContent":"                val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"INSERT","lineNumber":107,"content":"            // App trotzdem weiter laufen lassen"},{"type":"INSERT","lineNumber":108,"content":"        }"},{"type":"INSERT","lineNumber":109,"content":"    }"},{"type":"INSERT","lineNumber":110,"content":""},{"type":"DELETE","lineNumber":113,"oldContent":"private fun ARWalkingAppPreview() {"},{"type":"DELETE","lineNumber":116,"oldContent":"}"},{"type":"DELETE","lineNumber":117,"oldContent":"                )"},{"type":"INSERT","lineNumber":114,"content":"fun ARWalkingApp() {"},{"type":"INSERT","lineNumber":115,"content":"    val navController = rememberNavController()"},{"type":"INSERT","lineNumber":126,"content":"                val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"INSERT","lineNumber":141,"content":"private fun ARWalkingAppPreview() {"},{"type":"INSERT","lineNumber":145,"content":"}"},{"type":"INSERT","lineNumber":146,"content":""}]},{"timestamp":1754325258704,"changes":[{"type":"DELETE","lineNumber":13,"oldContent":"import androidx.activity.viewModels"},{"type":"DELETE","lineNumber":27,"oldContent":""},{"type":"DELETE","lineNumber":31,"oldContent":"import android.util.Log"},{"type":"DELETE","lineNumber":32,"oldContent":"import android.widget.Toast"},{"type":"DELETE","lineNumber":33,"oldContent":"import androidx.lifecycle.lifecycleScope"},{"type":"DELETE","lineNumber":34,"oldContent":"import com.example.arwalking.BuildConfig"},{"type":"DELETE","lineNumber":35,"oldContent":"import kotlinx.coroutines.launch"},{"type":"DELETE","lineNumber":36,"oldContent":"// OpenCV imports entfernt für Stub-Implementation"},{"type":"DELETE","lineNumber":38,"oldContent":""},{"type":"DELETE","lineNumber":40,"oldContent":"    private val routeViewModel: RouteViewModel by viewModels()"},{"type":"DELETE","lineNumber":42,"oldContent":""},{"type":"DELETE","lineNumber":43,"oldContent":""},{"type":"DELETE","lineNumber":70,"oldContent":""},{"type":"DELETE","lineNumber":71,"oldContent":"        try {"},{"type":"DELETE","lineNumber":72,"oldContent":"            Log.i(\"MainActivity\", \"Starting MainActivity...\")"},{"type":"DELETE","lineNumber":73,"oldContent":""},{"type":"DELETE","lineNumber":74,"oldContent":"            enableEdgeToEdge()"},{"type":"DELETE","lineNumber":75,"oldContent":"            // UI zuerst setzen - ohne ViewModel Initialisierung"},{"type":"DELETE","lineNumber":76,"oldContent":"            "},{"type":"DELETE","lineNumber":77,"oldContent":"            setContent {"},{"type":"DELETE","lineNumber":78,"oldContent":"                ARWalkingTheme {"},{"type":"DELETE","lineNumber":79,"oldContent":"                    Surface("},{"type":"DELETE","lineNumber":80,"oldContent":"                        modifier = Modifier.fillMaxSize(),"},{"type":"DELETE","lineNumber":81,"oldContent":"                        color = MaterialTheme.colorScheme.background"},{"type":"DELETE","lineNumber":82,"oldContent":"                    ) {"},{"type":"DELETE","lineNumber":83,"oldContent":"                        ARWalkingApp()"},{"type":"DELETE","lineNumber":84,"oldContent":"                    }"},{"type":"INSERT","lineNumber":58,"content":"        enableEdgeToEdge()"},{"type":"INSERT","lineNumber":59,"content":"        // Entferne checkCameraAndLaunch() - wird über Navigation gehandhabt"},{"type":"INSERT","lineNumber":60,"content":"        setContent {"},{"type":"INSERT","lineNumber":61,"content":"            ARWalkingTheme {"},{"type":"INSERT","lineNumber":62,"content":"                Surface("},{"type":"INSERT","lineNumber":63,"content":"                    modifier = Modifier.fillMaxSize(),"},{"type":"INSERT","lineNumber":64,"content":"                    color = MaterialTheme.colorScheme.background"},{"type":"INSERT","lineNumber":65,"content":"                ) {"},{"type":"INSERT","lineNumber":66,"content":"                    ARWalkingApp()"},{"type":"DELETE","lineNumber":87,"oldContent":"            // ViewModel und andere Initialisierung später und sicher"},{"type":"DELETE","lineNumber":88,"oldContent":""},{"type":"DELETE","lineNumber":89,"oldContent":"            lifecycleScope.launch {"},{"type":"DELETE","lineNumber":90,"oldContent":"                try {"},{"type":"DELETE","lineNumber":91,"oldContent":"                    routeViewModel.initializeStorage(this@MainActivity)"},{"type":"DELETE","lineNumber":92,"oldContent":"                    routeViewModel.loadNavigationRoute(this@MainActivity)"},{"type":"DELETE","lineNumber":93,"oldContent":"                    Log.i(\"MainActivity\", \"Initialization completed\")"},{"type":"DELETE","lineNumber":94,"oldContent":"                } catch (e: Exception) {"},{"type":"DELETE","lineNumber":95,"oldContent":"                    Log.e(\"MainActivity\", \"Initialization failed: ${'$'}{e.message}\", e)"},{"type":"DELETE","lineNumber":96,"oldContent":"                    Toast.makeText("},{"type":"DELETE","lineNumber":97,"oldContent":"                        this@MainActivity,"},{"type":"DELETE","lineNumber":98,"oldContent":"                        \"App initialization failed: ${'$'}{e.message}\","},{"type":"DELETE","lineNumber":99,"oldContent":""},{"type":"DELETE","lineNumber":100,"oldContent":"        } catch (e: Exception) {"},{"type":"DELETE","lineNumber":101,"oldContent":"                        Toast.LENGTH_LONG"},{"type":"DELETE","lineNumber":102,"oldContent":"            Log.e(\"MainActivity\", \"Error in onCreate: ${e.message}\", e)"},{"type":"DELETE","lineNumber":103,"oldContent":"                    ).show()"},{"type":"DELETE","lineNumber":104,"oldContent":"                }"},{"type":"DELETE","lineNumber":105,"oldContent":"            // App trotzdem weiter laufen lassen"},{"type":"DELETE","lineNumber":106,"oldContent":"            }"},{"type":"DELETE","lineNumber":108,"oldContent":"            Toast.makeText(this, \"App initialization failed: ${e.message}\", Toast.LENGTH_LONG).show()"},{"type":"DELETE","lineNumber":110,"oldContent":""},{"type":"DELETE","lineNumber":112,"oldContent":"fun ARWalkingApp() {"},{"type":"DELETE","lineNumber":114,"oldContent":"    val navController = rememberNavController()"},{"type":"INSERT","lineNumber":74,"content":"fun ARWalkingApp() {"},{"type":"INSERT","lineNumber":75,"content":"    val navController = rememberNavController()"},{"type":"DELETE","lineNumber":124,"oldContent":"                val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"INSERT","lineNumber":86,"content":"                val encodedDestination = backStackEntry.arguments?.getString(\"destination\") ?: \"Unbekanntes Ziel\""},{"type":"INSERT","lineNumber":95,"content":""},{"type":"INSERT","lineNumber":96,"content":"            // Hier können später weitere Screens hinzugefügt werden:"},{"type":"INSERT","lineNumber":97,"content":"            // composable(\"ar_view\") { ARScreen(navController = navController) }"},{"type":"INSERT","lineNumber":98,"content":"            // composable(\"settings\") { SettingsScreen(navController = navController) }"},{"type":"DELETE","lineNumber":140,"oldContent":"private fun ARWalkingAppPreview() {"},{"type":"INSERT","lineNumber":105,"content":"private fun ARWalkingAppPreview() {"},{"type":"DELETE","lineNumber":146,"oldContent":""}]}]}}}